(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{9025:(e,t,r)=>{Promise.resolve().then(r.bind(r,4730))},7401:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(2115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:c="",children:u,iconNode:d,...m}=e;return(0,a.createElement)("svg",{ref:t,...n,width:s,height:s,stroke:r,strokeWidth:i?24*Number(l)/Number(s):l,className:o("lucide",c),...m},[...d.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),i=(e,t)=>{let r=(0,a.forwardRef)((r,n)=>{let{className:i,...c}=r;return(0,a.createElement)(l,{ref:n,iconNode:t,className:o("lucide-".concat(s(e)),i),...c})});return r.displayName="".concat(e),r}},738:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(7401).A)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},2598:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(7401).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6046:(e,t,r)=>{"use strict";var a=r(6658);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},836:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let a=r(2818).env.NEXT_PUBLIC_API_URL,s={LOGIN_API:"".concat(a,"login"),RESET_PASSWORD_PAGE_API:"".concat(a,"request-password-reset"),RESET_PASSWORD_API:"".concat(a,"reset-password"),FETCH_NOMINATED_EMPLOYEES:"".concat(a,"users/fetch_nominated_employees"),FETCH_ALL_TEAMS:"".concat(a,"teams/fetch_all_teams"),FETCH_ALL_TEAM_LEADERS:"".concat(a,"user/fetch_all_TeamLeaders"),FETCH_MY_EMPLOYEES:"".concat(a,"user/fetch_my_employees"),SHOUTOUT_API:"".concat(a,"api/shoutout")}},4730:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var a=r(5155),s=r(2115),o=r(8173),n=r.n(o),l=r(738),i=r(2598),c=r(68),u=r.n(c),d=r(6046),m=r(3201);let _=r(836).A.LOGIN_API,g=async(e,t)=>{try{let r=await fetch(_,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Email:e,Password:t})});return await r.json()}catch(e){throw Error("Network error. Please try again.")}};function h(){let{login:e,user:t}=(0,s.useContext)(m.c),[r,o]=(0,s.useState)(""),[c,_]=(0,s.useState)(""),[h,f]=(0,s.useState)(!1),[p,S]=(0,s.useState)(""),[E,y]=(0,s.useState)(""),v=(0,s.useRef)(null),[w,N]=(0,s.useState)(!1),[A,x]=(0,s.useState)(!1),k=(0,d.useRouter)();(0,s.useEffect)(()=>{if(t){k.push("/dashboard");return}x(!0)},[t]),(0,s.useEffect)(()=>{if(E){let e=setTimeout(()=>{y("")},2e3);return()=>clearTimeout(e)}},[E]);let P=e=>{"Enter"===e.key&&(e.preventDefault(),r&&c&&c.length>=6&&v.current.requestSubmit())},I=async t=>{if(N(!0),t.preventDefault(),S(""),y(""),!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(r)){S("Please enter a valid email address.");return}if(!r||!c){S("Email and Password are required!");return}try{var a;let t=await g(r,c);if(200!==t.statusCode||t.message.isVerified||t.isError){if(200===t.statusCode&&t.message.isVerified&&(null===(a=t.message)||void 0===a?void 0:a.token)&&!t.isError){let r=t.message.token,a=t.message.user;e(a),localStorage.setItem("token",r),k.push("/dashboard");return}S(t.message||"Try again later!")}else{k.push("/ResetPasswordEmail?email=".concat(encodeURIComponent(r)));return}}catch(e){S(e.message||"Something went wrong")}finally{N(!1)}};return(0,a.jsx)("div",{className:u().container,children:A?(0,a.jsxs)("div",{className:u().card,children:[(0,a.jsx)("img",{src:"/logo.svg",alt:"Innoage Logo",className:u().logo}),(0,a.jsx)("h2",{className:u().title,children:"Welcome To InnoAge"}),(0,a.jsx)("p",{className:u().subtitle,children:"Sign in to your account"}),p&&(0,a.jsx)("p",{className:u().error,children:p}),E&&(0,a.jsx)("p",{className:u().success,children:E})," ",(0,a.jsxs)("form",{ref:v,onSubmit:I,className:u().form,children:[(0,a.jsx)("input",{type:"email",placeholder:"Email",name:"email",className:u().input,value:r,onChange:e=>o(e.target.value),onKeyDown:P,required:!0}),(0,a.jsxs)("div",{className:u().passwordContainer,children:[(0,a.jsx)("input",{type:h?"text":"password",placeholder:"Password",name:"password",className:u().input,value:c,onChange:e=>_(e.target.value),onKeyDown:P,required:!0}),(0,a.jsx)("button",{type:"button",className:u().eyeButton,onClick:()=>f(!h),children:h?(0,a.jsx)(l.A,{size:20}):(0,a.jsx)(i.A,{size:20})})]}),(0,a.jsx)("button",{type:"submit",className:"".concat(u().button," ").concat(!(r&&c&&c.length>=6)||w?u().disabledButton:""),disabled:!(r&&c&&c.length>=6)||w,children:"Login"})]}),(0,a.jsxs)("p",{className:u().footerText,children:["Forgot Your Password?"," ",(0,a.jsx)(n(),{href:"/ResetPasswordEmail",className:u().link,children:"Forgot Password"})]})]}):null})}},3201:(e,t,r)=>{"use strict";r.d(t,{O:()=>l,c:()=>n});var a=r(5155),s=r(2115),o=r(6046);let n=(0,s.createContext)(),l=e=>{let{children:t}=e,[r,l]=(0,s.useState)(null),i=(0,o.useRouter)();return(0,s.useEffect)(()=>{let e=localStorage.getItem("token");if(!e){localStorage.removeItem("user"),i.push("/login");return}try{let t=JSON.parse(atob(e.split(".")[1])),r=1e3*t.exp;if(Date.now()>r){localStorage.removeItem("token"),localStorage.removeItem("user"),i.push("/login");return}}catch(e){console.log("Invalid Token"),localStorage.removeItem("token"),localStorage.removeItem("user"),i.push("/login")}},[i]),(0,s.useEffect)(()=>{let e=localStorage.getItem("user");e&&l(JSON.parse(e))},[]),(0,a.jsx)(n.Provider,{value:{user:r,login:e=>{l(e),localStorage.setItem("user",JSON.stringify(e))},logout:()=>{i.replace("/login"),localStorage.removeItem("token"),localStorage.removeItem("user"),l(null)}},children:t})}},68:e=>{e.exports={container:"login_container__kitvQ",card:"login_card__NoG7p",fadeIn:"login_fadeIn__pJUG5",logo:"login_logo__uuWzc",title:"login_title__r1aBc",subtitle:"login_subtitle__JqAz7",form:"login_form__NY6Qf",input:"login_input__GK8Qo",passwordContainer:"login_passwordContainer__aF_NS",eyeButton:"login_eyeButton__Eygnh",button:"login_button__dh0qR",disabledButton:"login_disabledButton__U3jeq",success:"login_success__8V49Y",error:"login_error__wxSLK",footerText:"login_footerText__inaQM",link:"login_link__sOeCn"}}},e=>{var t=t=>e(e.s=t);e.O(0,[471,173,441,517,358],()=>t(9025)),_N_E=e.O()}]);