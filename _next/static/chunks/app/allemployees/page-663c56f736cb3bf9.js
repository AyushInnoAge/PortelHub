(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[899],{9032:(e,t,a)=>{Promise.resolve().then(a.bind(a,118))},7401:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var r=a(2115);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:l=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:c="",children:d,iconNode:u,...m}=e;return(0,r.createElement)("svg",{ref:t,...o,width:l,height:l,stroke:a,strokeWidth:i?24*Number(s)/Number(l):s,className:n("lucide",c),...m},[...u.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(d)?d:[d]])}),i=(e,t)=>{let a=(0,r.forwardRef)((a,o)=>{let{className:i,...c}=a;return(0,r.createElement)(s,{ref:o,iconNode:t,className:n("lucide-".concat(l(e)),i),...c})});return a.displayName="".concat(e),a}},767:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(7401).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},103:(e,t,a)=>{"use strict";a.d(t,{M:()=>s,l:()=>o});var r=a(2651),l=a(2818);let n=()=>localStorage.getItem("token"),o=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{let a=n();var t=e?"".concat(l.env.NEXT_PUBLIC_API_URL,"user/fetch_my_employees?UserRole=Admin"):"".concat(l.env.NEXT_PUBLIC_API_URL,"user/fetch_my_employees");return await r.A.get(t,{headers:{Authorization:"Bearer ".concat(a)}})}catch(e){throw new e.message}},s=async e=>{try{let t=n();return await r.A.post("".concat(l.env.NEXT_PUBLIC_API_URL,"api/shoutout"),e,{headers:{Authorization:"Bearer ".concat(t)}})}catch(e){throw new e.message}}},6625:(e,t,a)=>{"use strict";a.d(t,{c:()=>o,e:()=>n});var r=a(2818);let l=()=>localStorage.getItem("token"),n=async(e,t,a,n,o)=>{try{let s=l(),i=new FormData;i.append("patchDoc",JSON.stringify([{op:"replace",path:"/Email",value:t},{op:"replace",path:"/PhoneNo",value:a},{op:"replace",path:"/Address",value:n}])),o&&i.append("imageFile",o);let c="".concat(r.env.NEXT_PUBLIC_API_URL,"User/UpdateUserProfile/").concat(e),d=await fetch(c,{method:"PATCH",headers:{Authorization:"Bearer ".concat(s)},body:i});return await d.json()}catch(e){throw Error(e.message)}},o=async(e,t)=>{try{let a=l(),n=new FormData;n.append("patchDoc",JSON.stringify([{op:"replace",path:"/isActive",value:!1}])),t&&n.append("imageFile",t);let o="".concat(r.env.NEXT_PUBLIC_API_URL,"User/UpdateUserProfile/").concat(e),s=await fetch(o,{method:"PATCH",headers:{Authorization:"Bearer ".concat(a)},body:n});return await s.json()}catch(e){throw Error(e.message)}}},2853:(e,t,a)=>{"use strict";a.d(t,{M2:()=>o,OW:()=>i,_0:()=>s});var r=a(2651),l=a(2818);let n=()=>localStorage.getItem("token"),o=async()=>{try{let e=n();return await fetch("".concat(l.env.NEXT_PUBLIC_API_URL,"fetch_all_roles"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})}catch(e){console.error(e)}},s=async()=>{try{let e=n();return await fetch("".concat(l.env.NEXT_PUBLIC_API_URL,"fetch_all_departments"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})}catch(e){console.error(e)}},i=async e=>{try{let t=n();return r.A.post("".concat(l.env.NEXT_PUBLIC_API_URL,"signup"),e,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}})}catch(e){console.error(e)}}},118:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>y});var r=a(5155);a(6973);var l=a(2115);let n=(0,a(7401).A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var o=a(767),s=a(103),i=a(2853),c=a(2651),d=a(2818);let u=()=>localStorage.getItem("token"),m=async(e,t,a,r,l,n,o,s,i)=>{try{let m=new FormData;m.append("patchDoc",JSON.stringify([{op:"replace",path:"/Email",value:t},{op:"replace",path:"/PhoneNo",value:a},{op:"replace",path:"/Name",value:e},{op:"replace",path:"/Designation",value:r},{op:"replace",path:"/DepartmentId",value:n},{op:"replace",path:"/RoleId",value:o},{op:"replace",path:"/TeamLeaderId",value:s}])),l&&m.append("imageFile",l);let p=u();return(await c.A.patch("".concat(d.env.NEXT_PUBLIC_API_URL,"User/UpdateUserProfile/").concat(i),m,{headers:{Authorization:"Bearer ".concat(p)}})).data}catch(e){console.error("Update failed:",e.message)}};var p=a(6046),h=a(3201),v=a(3117),g=a(6625),f=a(2110);function y(){var e;let{user:t}=(0,l.useContext)(h.c),a=(0,p.useRouter)(),[c,d]=(0,l.useState)("All"),[u,y]=(0,l.useState)([]),[j,N]=(0,l.useState)(null),[x,b]=(0,l.useState)([]),[w,C]=(0,l.useState)([]),[S,P]=(0,l.useState)([]),[I,E]=(0,l.useState)(null),[_,A]=(0,l.useState)(null),[O,k]=(0,l.useState)(null),[U,D]=(0,l.useState)(null),[L,R]=(0,l.useState)(null),[T,B]=(0,l.useState)(null),[z,X]=(0,l.useState)(null),[F,J]=(0,l.useState)(null),[M,W]=(0,l.useState)(null),[H,$]=(0,l.useState)(null);(0,l.useEffect)(()=>{if(t&&1!=t.userRole&&2!=t.userRole){a.push("/dashboard");return}},[t]),(0,l.useEffect)(()=>{try{(async()=>{let e=await (await (0,i._0)()).json();e.unshift({id:"1",departmentName:"All"}),b(e);let t=await (0,s.l)(!0);y(t.data.employeeData);let a=await (0,i.M2)();C(await a.json());let r=new Set,l=[];for(let e of t.data.employeeData){let t=e.role.roleName;["TeamLeader","HR","Admin"].includes(t)&&!r.has(e.id)&&(r.add(e.id),l.push({id:e.id,teamName:e.name,teamLeader:e.id}))}P(l)})()}catch(e){console.error("Error fetching data:",e)}},[]);let Y="All"===c?u:u.filter(e=>{var t;return(null===(t=e.department)||void 0===t?void 0:t.departmentName)===c}),Z=e=>{let{name:t,value:a}=e.target;N({...j,[t]:a})},q=()=>{y(u.map(e=>e.id===j.id?j:e)),N(null)},G=e=>{let t=e.target.files[0];if(t){let e=new FileReader;e.onloadend=()=>{N(a=>({...a,image:e.result,imageFile:t}))},e.readAsDataURL(t)}},K=async()=>{try{let e=await m(T||(null==j?void 0:j.name),L||(null==j?void 0:j.email),U||(null==j?void 0:j.phoneNo),z||(null==j?void 0:j.designation),F||null,I||(null==j?void 0:j.departmentId),_||(null==j?void 0:j.roleId),O||(null==j?void 0:j.teamId),null==j?void 0:j.employeeId);if(200===e.statusCode){let e=await (0,s.l)(!0);y(e.data.employeeData),f.oR.success("Employee data updated successfully!")}}catch(e){console.error("Error submitting data:",e)}};return(0,r.jsxs)("div",{className:"page-container",children:[(0,r.jsx)(f.N9,{position:"top-right",autoClose:3e3}),H&&(0,r.jsx)("div",{className:"modal-backdrop",children:(0,r.jsx)("div",{className:"warning-modal",children:(0,r.jsxs)("div",{className:"warning-content",children:[(0,r.jsx)("h3",{children:"Warning!"}),(0,r.jsx)("p",{children:"Are you sure you want to deactivate this user?"}),(0,r.jsxs)("div",{className:"warning-buttons",children:[(0,r.jsx)("button",{className:"no-btn",onClick:()=>$(null),children:"No"}),(0,r.jsx)("button",{className:"yes-btn",onClick:async()=>{try{let e=await (0,g.c)(H.employeeId);if(200===e.statusCode){f.oR.success("User deactivated successfully!");let e=await (0,s.l)();y(e.data.employeeData),$(null)}}catch(e){console.error("Error deactivating user:",e),alert("Failed to deactivate user. Please try again.")}},children:"Yes"})]})]})})}),(0,r.jsxs)("button",{className:"add-activity-btn",style:{marginLeft:"auto"},onClick:()=>{a.push("/signup")},children:[(0,r.jsx)("span",{className:"plus-icon",children:"+ "}),"Add New Employee"]}),(0,r.jsx)("div",{className:"filter-buttons",children:x.map(e=>(0,r.jsx)("button",{onClick:()=>d(null==e?void 0:e.departmentName),className:"filter-btn ".concat(c===(null==e?void 0:e.departmentName)?"active":""),children:null==e?void 0:e.departmentName},e.id))}),(0,r.jsx)("div",{className:"employee-list",children:Y.map(e=>{var t,a;return(0,r.jsxs)("div",{className:"employee-card",children:[(0,r.jsxs)("div",{className:"employee-info",children:[(0,r.jsx)("img",{src:(null==e?void 0:null===(t=e.image)||void 0===t?void 0:t.trim())?null==e?void 0:e.image:"https://api.dicebear.com/7.x/initials/svg?seed=".concat(null==e?void 0:e.name),alt:e.name,className:"profile-img"}),(0,r.jsxs)("div",{className:"employee-details",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"employee-name",children:e.name}),(0,r.jsx)("p",{className:"employee-role",children:e.designation})]}),(0,r.jsxs)("div",{className:"employee-contact email",children:["\uD83D\uDCE7 ",e.email]}),(0,r.jsxs)("div",{className:"employee-contact phone",children:["\uD83D\uDCDE ",e.phoneNo]}),(0,r.jsxs)("div",{className:"employee-contact dept",children:["\uD83C\uDFE2 ",null===(a=e.department)||void 0===a?void 0:a.departmentName]})]})]}),(0,r.jsx)("button",{className:"edit-btn",onClick:()=>N(e),children:(0,r.jsx)(n,{size:18})}),(0,r.jsx)("button",{className:"deactivate-btn",onClick:()=>$(e),children:(0,r.jsx)(v.PXm,{})})]},e.id)})}),j&&(0,r.jsx)("div",{className:"modal-backdrop",children:(0,r.jsxs)("div",{className:"modal-box small-modal",children:[(0,r.jsxs)("div",{className:"modal-header",children:[(0,r.jsx)("h3",{children:"Edit Employee"}),(0,r.jsx)("button",{onClick:()=>N(null),className:"close-btn",children:(0,r.jsx)(o.A,{size:20})})]}),(0,r.jsxs)("div",{className:"modal-body",children:[(0,r.jsx)("div",{className:"form-row center-content",children:(0,r.jsx)("img",{src:(null==j?void 0:null===(e=j.image)||void 0===e?void 0:e.trim())?null==j?void 0:j.image:"https://api.dicebear.com/7.x/initials/svg?seed=".concat(null==j?void 0:j.name),alt:"Profile",className:"profile-preview"})}),(0,r.jsxs)("div",{className:"form-row",children:[(0,r.jsx)("label",{children:"Change Image:"}),(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{J(e.target.files[0]),G(e)}})]}),(0,r.jsxs)("div",{className:"form-row",children:[(0,r.jsx)("label",{children:"Name:"}),(0,r.jsx)("input",{type:"text",name:"name",value:j.name,onChange:e=>{B(e.target.value),Z(e)}})]}),(0,r.jsxs)("div",{className:"form-row",children:[(0,r.jsx)("label",{children:"Designation:"}),(0,r.jsx)("input",{type:"text",name:"designation",value:j.designation,onChange:e=>{X(e.target.value),Z(e)}})]}),(0,r.jsxs)("div",{className:"form-row",children:[(0,r.jsx)("label",{children:"Email:"}),(0,r.jsx)("input",{type:"email",name:"email",value:j.email,onChange:e=>{R(e.target.value),Z(e)}})]}),(0,r.jsxs)("div",{className:"form-row",children:[(0,r.jsx)("label",{children:"Phone No:"}),(0,r.jsx)("input",{type:"text",name:"phoneNo",value:j.phoneNo,onChange:e=>{D(e.target.value),Z(e)}})]}),(0,r.jsxs)("div",{className:"form-row",children:[(0,r.jsx)("label",{children:"Department:"}),(0,r.jsxs)("select",{name:"departmentId",onChange:e=>{E(e.target.value),Z(e)},children:[(0,r.jsx)("option",{value:"",children:"Select"}),x.map((e,t)=>(0,r.jsx)("option",{value:e.id,children:e.departmentName},t))]})]}),(0,r.jsxs)("div",{className:"form-row",children:[(0,r.jsx)("label",{children:"Role:"}),(0,r.jsxs)("select",{name:"roleId",onChange:e=>{A(e.target.value),Z(e)},children:[(0,r.jsx)("option",{value:"",children:"Select"}),w.map((e,t)=>(0,r.jsx)("option",{value:e.id,children:e.roleName},t))]})]}),(0,r.jsxs)("div",{className:"form-row",children:[(0,r.jsx)("label",{children:"Team:"}),(0,r.jsxs)("select",{name:"teamId",onChange:e=>{k(e.target.value),Z(e)},children:[(0,r.jsx)("option",{value:"",children:"Select"}),S.map((e,t)=>(0,r.jsx)("option",{value:e.id,children:e.teamName},t))]})]}),(0,r.jsx)("button",{className:"submit-btn",onClick:async()=>{q(),await K()},children:"Save Changes"})]})]})})]})}},3201:(e,t,a)=>{"use strict";a.d(t,{O:()=>s,c:()=>o});var r=a(5155),l=a(2115),n=a(6046);let o=(0,l.createContext)(),s=e=>{let{children:t}=e,[a,s]=(0,l.useState)(null),i=(0,n.useRouter)();return(0,l.useEffect)(()=>{let e=localStorage.getItem("token");if(!e){localStorage.removeItem("user"),i.push("/login");return}try{let t=JSON.parse(atob(e.split(".")[1])),a=1e3*t.exp;if(Date.now()>a){localStorage.removeItem("token"),localStorage.removeItem("user"),i.push("/login");return}}catch(e){console.log("Invalid Token"),localStorage.removeItem("token"),localStorage.removeItem("user"),i.push("/login")}},[i]),(0,l.useEffect)(()=>{let e=localStorage.getItem("user");e&&s(JSON.parse(e))},[]),(0,r.jsx)(o.Provider,{value:{user:a,login:e=>{s(e),localStorage.setItem("user",JSON.stringify(e))},logout:()=>{i.replace("/login"),localStorage.removeItem("token"),localStorage.removeItem("user"),s(null)}},children:t})}},6973:()=>{},3435:(e,t,a)=>{"use strict";a.d(t,{k5:()=>d});var r=a(2115),l={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n=r.createContext&&r.createContext(l),o=["attr","size","title"];function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach(function(t){var r,l;r=t,l=a[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r))in e?Object.defineProperty(e,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[r]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function d(e){return t=>r.createElement(u,s({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,a)=>r.createElement(t.tag,c({key:a},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var a,{attr:l,size:n,title:i}=e,d=function(e,t){if(null==e)return{};var a,r,l=function(e,t){if(null==e)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}(e,o),u=n||t.size||"1em";return t.className&&(a=t.className),e.className&&(a=(a?a+" ":"")+e.className),r.createElement("svg",s({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,l,d,{className:a,style:c(c({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),i&&r.createElement("title",null,i),e.children)};return void 0!==n?r.createElement(n.Consumer,null,e=>t(e)):t(l)}}},e=>{var t=t=>e(e.s=t);e.O(0,[580,271,829,651,441,517,358],()=>t(9032)),_N_E=e.O()}]);