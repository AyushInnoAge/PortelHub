(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[945],{9:(e,t,s)=>{Promise.resolve().then(s.bind(s,7692))},7401:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(2115);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:c="",children:d,iconNode:u,...m}=e;return(0,a.createElement)("svg",{ref:t,...o,width:r,height:r,stroke:s,strokeWidth:i?24*Number(l)/Number(r):l,className:n("lucide",c),...m},[...u.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),i=(e,t)=>{let s=(0,a.forwardRef)((s,o)=>{let{className:i,...c}=s;return(0,a.createElement)(l,{ref:o,iconNode:t,className:n("lucide-".concat(r(e)),i),...c})});return s.displayName="".concat(e),s}},738:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(7401).A)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},2598:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(7401).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6046:(e,t,s)=>{"use strict";var a=s(6658);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},7692:(e,t,s)=>{"use strict";s.d(t,{default:()=>h});var a=s(5155),r=s(2115),n=s(8173),o=s.n(n),l=s(738),i=s(2598),c=s(9470),d=s.n(c),u=s(836);let m=async e=>{try{let t=await fetch(u.A.RESET_PASSWORD_PAGE_API,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Email:e})}),s=await t.json();if(!t.ok)throw Error(s.message||"Failed to send OTP.");return s}catch(e){throw Error(e.message||"Network error. Please try again.")}},_=async(e,t,s)=>{try{let a=await fetch(u.A.RESET_PASSWORD_API,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Email:e,Token:t,NewPassword:s})}),r=await a.json();if(!a.ok)throw Error(r.message||"Failed to update password.");return r}catch(e){throw Error(e.message||"Network error. Please try again.")}};var p=s(6046);function h(){let e=(0,p.useSearchParams)(),t=(0,p.useRouter)(),[s,n]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[h,w]=(0,r.useState)(""),[f,g]=(0,r.useState)(""),[y,P]=(0,r.useState)(!1),[E,S]=(0,r.useState)("email"),[A,N]=(0,r.useState)(""),[x,T]=(0,r.useState)(!1),[j,v]=(0,r.useState)(""),b=(0,r.useRef)(null);(0,r.useEffect)(()=>{let t=e.get("email");t&&n(t)},[]);let k=e=>{"Enter"===e.key&&(e.preventDefault(),b.current.requestSubmit())},O=async e=>{if(e.preventDefault(),v(""),N(""),T(!0),!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(s)){v("Please enter a valid email address."),T(!1);return}try{await m(s),N("OTP sent to your email. Enter OTP and set a new password."),S("otp-password")}catch(e){v(e.message)}finally{T(!1)}},C=async e=>{if(e.preventDefault(),v(""),N(""),T(!0),6!==c.length){v("Please enter a valid 6-digit OTP."),T(!1);return}if(h.length<6){v("Password must be at least 6 characters."),T(!1);return}if(h!==f){v("Passwords do not match."),T(!1);return}try{await _(s,c,h),N("Password updated successfully! Redirecting to login..."),t.push("/login")}catch(e){v(e.message)}finally{T(!1)}};return(0,a.jsx)("div",{className:d().container,children:(0,a.jsxs)("div",{className:d().card,children:[(0,a.jsx)("img",{src:"/logo.svg",alt:"Innoage Logo",className:d().logo}),(0,a.jsx)("h2",{className:d().title,children:"Welcome To InnoAge"}),(0,a.jsx)("p",{className:d().subtitle,children:"Trouble logging in?"}),j&&(0,a.jsx)("p",{className:d().error,children:j}),(0,a.jsxs)("form",{ref:b,onSubmit:"email"===E?O:C,className:d().form,children:["email"===E&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"email",placeholder:"Enter Email",className:d().input,value:s,onChange:e=>n(e.target.value),onKeyDown:k,required:!0}),(0,a.jsx)("button",{type:"submit",className:d().button,disabled:!s||x,children:x?"Sending OTP...":"Send OTP"})]}),"otp-password"===E&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"text",placeholder:"Enter OTP",className:d().input,value:c,onChange:e=>u(e.target.value),onKeyDown:k,required:!0,maxLength:"6"}),(0,a.jsx)("div",{className:d().passwordContainer,children:(0,a.jsx)("input",{type:"text",placeholder:"New Password",className:d().input,value:h,onChange:e=>w(e.target.value),required:!0})}),(0,a.jsxs)("div",{className:d().passwordContainer,children:[(0,a.jsx)("input",{type:y?"text":"password",placeholder:"Confirm New Password",className:d().input,value:f,onChange:e=>g(e.target.value),required:!0}),(0,a.jsx)("button",{type:"button",className:d().eyeButton,onClick:()=>P(!y),children:y?(0,a.jsx)(l.A,{size:20}):(0,a.jsx)(i.A,{size:20})})]}),(0,a.jsx)("button",{type:"submit",className:d().button,disabled:x,children:x?"Updating Password...":"Verify OTP & Update Password"})]})]}),A&&(0,a.jsx)("p",{className:d().success,children:A}),(0,a.jsxs)("p",{className:d().footerText,children:["Back to Login: ",(0,a.jsx)(o(),{href:"/login",className:d().link,children:"Login"})]})]})})}},836:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let a=s(2818).env.NEXT_PUBLIC_API_URL,r={LOGIN_API:"".concat(a,"login"),RESET_PASSWORD_PAGE_API:"".concat(a,"request-password-reset"),RESET_PASSWORD_API:"".concat(a,"reset-password"),FETCH_NOMINATED_EMPLOYEES:"".concat(a,"users/fetch_nominated_employees"),FETCH_ALL_TEAMS:"".concat(a,"teams/fetch_all_teams"),FETCH_ALL_TEAM_LEADERS:"".concat(a,"user/fetch_all_TeamLeaders"),FETCH_MY_EMPLOYEES:"".concat(a,"user/fetch_my_employees"),SHOUTOUT_API:"".concat(a,"api/shoutout")}},9470:e=>{e.exports={container:"resetpasswordemail_container__zLwrI",card:"resetpasswordemail_card__jcce6",fadeIn:"resetpasswordemail_fadeIn__AI7f3",logo:"resetpasswordemail_logo__H0KqC",title:"resetpasswordemail_title__dFiC1",subtitle:"resetpasswordemail_subtitle__W5cZ0",form:"resetpasswordemail_form__jDG1K",input:"resetpasswordemail_input__TPTsQ",passwordContainer:"resetpasswordemail_passwordContainer__F9swm",eyeButton:"resetpasswordemail_eyeButton__0mHCj",button:"resetpasswordemail_button__LgqFF",disabledButton:"resetpasswordemail_disabledButton__SvRMf",footerText:"resetpasswordemail_footerText___e2Sb",link:"resetpasswordemail_link__HRnl3",success:"resetpasswordemail_success__xb1Ka",error:"resetpasswordemail_error__LjtpO"}}},e=>{var t=t=>e(e.s=t);e.O(0,[793,173,441,517,358],()=>t(9)),_N_E=e.O()}]);